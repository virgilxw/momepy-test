(() => {
var exports = {};
exports.id = 405;
exports.ids = [405];
exports.modules = {

/***/ 566:
/***/ ((module) => {

// Exports
module.exports = {
	"style": {"fontFamily":"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'","fontStyle":"normal"},
	"className": "__className_0ec1f4"
};


/***/ }),

/***/ 978:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   config: () => (/* binding */ config),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),
/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),
/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),
/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),
/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),
/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),
/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),
/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(185);
/* harmony import */ var next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(182);
/* harmony import */ var private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(603);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__]);
private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];

        // Next.js Route Loader
        
        

        // Import the userland code.
        

        // Re-export the component (should be the default export).
        /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "default"));

        // Re-export methods.
        const getStaticProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "getStaticProps")
        const getStaticPaths = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "getStaticPaths")
        const getServerSideProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "getServerSideProps")
        const config = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "config")
        const reportWebVitals = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "reportWebVitals")

        // Re-export legacy methods.
        const unstable_getStaticProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "unstable_getStaticProps")
        const unstable_getStaticPaths = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "unstable_getStaticPaths")
        const unstable_getStaticParams = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "unstable_getStaticParams")
        const unstable_getServerProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "unstable_getServerProps")
        const unstable_getServerSideProps = (0,next_dist_build_webpack_loaders_next_route_loader_helpers__WEBPACK_IMPORTED_MODULE_1__/* .hoist */ .l)(private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__, "unstable_getServerSideProps")

        // Create and export the route module that will be consumed.
        const options = {"definition":{"kind":"PAGES","page":"/index","pathname":"/","bundlePath":"","filename":""}}
        const routeModule = new (next_dist_server_future_route_modules_pages_module__WEBPACK_IMPORTED_MODULE_0___default())({ ...options, userland: private_next_pages_index_tsx__WEBPACK_IMPORTED_MODULE_2__ })
        
        
    
__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 561:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(968);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([d3__WEBPACK_IMPORTED_MODULE_1__]);
d3__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];




const ViolinShape = ({ data, xScale, height, binNumber, targetValue })=>{
    const min = Math.min(...data);
    const max = Math.max(...data);
    const binBuilder = d3__WEBPACK_IMPORTED_MODULE_1__.bin().domain([
        min,
        max
    ]).thresholds(xScale.ticks(binNumber)).value((d)=>d);
    const bins = binBuilder(data);
    const biggestBin = Math.max(...bins.map((b)=>b.length));
    const wScale = d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear().domain([
        -biggestBin,
        biggestBin
    ]).range([
        0,
        height
    ]);
    const areaBuilder = d3__WEBPACK_IMPORTED_MODULE_1__.area().y0((d)=>wScale(-d.length)).y1((d)=>wScale(d.length)).x((d)=>xScale(d.x0 || 0)).curve(d3__WEBPACK_IMPORTED_MODULE_1__.curveBumpY);
    const areaPath = areaBuilder(bins);
    const noTarget = (targetValue)=>{
        if (targetValue === null) {
            return true;
        } else if (Array.isArray(targetValue)) {
            if (targetValue.some((item)=>item == null)) {
                return true;
            }
        }
        return false;
    };
    if (noTarget(targetValue)) {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("path", {
                d: areaPath || undefined,
                opacity: 1,
                stroke: "#9a6fb0",
                fill: "#9a6fb0",
                fillOpacity: 0.1,
                strokeWidth: 2
            })
        });
    } else if (Array.isArray(targetValue)) {
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("path", {
                    d: areaPath || undefined,
                    opacity: 1,
                    stroke: "#9a6fb0",
                    fill: "#9a6fb0",
                    fillOpacity: 0.1,
                    strokeWidth: 2
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("line", {
                    x1: xScale(targetValue[1]),
                    y1: 0,
                    x2: xScale(targetValue[1]),
                    y2: height,
                    stroke: "red"
                }, targetValue[1]),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("rect", {
                    x: xScale(targetValue[0]),
                    y: 0,
                    width: xScale(targetValue[2]) - xScale(targetValue[0]),
                    height: height,
                    fill: "red",
                    fillOpacity: 0.1,
                    strokeWidth: 1,
                    stroke: "red"
                })
            ]
        });
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("path", {
                d: areaPath || undefined,
                opacity: 1,
                stroke: "#9a6fb0",
                fill: "#9a6fb0",
                fillOpacity: 0.1,
                strokeWidth: 2
            }),
            !Array.isArray(targetValue) && targetValue !== null && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("line", {
                x1: xScale(targetValue),
                y1: 0,
                x2: xScale(targetValue),
                y2: height,
                stroke: "red"
            })
        ]
    });
};
const ViolinPlot = ({ city_data, width, height, plotKey, targetValue })=>{
    // Render the ViolinPlot component using the provided data and xScale
    const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);
    const [xScale, setXScale] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(()=>(0,d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear)());
    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{
        if (city_data && city_data[plotKey] != undefined) {
            const valueArray = city_data[plotKey].map(Number).filter((num)=>!isNaN(num));
            if (valueArray != undefined) {
                // Calculate the 0.05 and 0.95 percentiles
                let p5 = (0,d3__WEBPACK_IMPORTED_MODULE_1__.quantile)(valueArray.sort(), 0.05);
                let p95 = (0,d3__WEBPACK_IMPORTED_MODULE_1__.quantile)(valueArray, 0.95);
                if (p5 !== undefined && p95 !== undefined) {
                    const yS = (0,d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear)().domain([
                        p5,
                        p95
                    ]).range([
                        0,
                        width * 0.8
                    ]);
                    setData(valueArray);
                    setXScale(()=>yS);
                }
            }
        }
    }, []);
    if (!data || !xScale) {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            children: "Loading..."
        });
    }
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("svg", {
        style: {
            width: width,
            height: height * 2
        },
        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("g", {
            transform: `translate(${width * 0.1}, ${height})`,
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(ViolinShape, {
                height: height,
                xScale: xScale,
                data: data,
                binNumber: 25,
                targetValue: targetValue
            })
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ViolinPlot);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 848:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function Legend({ data }) {
    if (!data || data.length === 0) {
        return null;
    } else if (data.length > 8) {
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: `grid grid-cols-2 gap-x-4`,
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                    children: data.slice(0, Math.ceil(data.length / 2)).map(([value, color], index)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "flex items-center space-x-2",
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    style: {
                                        backgroundColor: color
                                    },
                                    className: "w-6 h-3 border rounded"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: "text-xs",
                                    children: value
                                })
                            ]
                        }, value + index))
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                    children: data.slice(Math.ceil(data.length / 2)).map(([value, color], index)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "flex items-center space-x-2",
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    style: {
                                        backgroundColor: color
                                    },
                                    className: "w-6 h-3 border rounded"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: "text-xs",
                                    children: value
                                })
                            ]
                        }, value + index))
                })
            ]
        });
    } else {
        return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
            className: `grid grid-cols-2 gap-x-4`,
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                children: data.map(([value, color], index)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                style: {
                                    backgroundColor: color
                                },
                                className: "w-6 h-3 border rounded"
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: "text-xs",
                                children: value
                            })
                        ]
                    }, value + index))
            })
        });
    }
}
function ControlPanel({ selectedVar, setSelectedVar, selectedVarScale, setSelectedVarScale, selectedCity, setSelectedCity }) {
    const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Fetch the JSON file
        fetch("panel-description.json").then((response)=>{
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json(); // This returns a promise
        }).then((data)=>{
            // Update the state to trigger a re-render.
            // Note that "data" is an object and will be added to the list
            setData(data);
        }).catch((error)=>{
            console.error("Error:", error);
        });
    }, [
        selectedVar
    ]);
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        className: "control-panel container mx-auto",
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "flex",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: "w-3/4 p-4",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3", {
                            children: [
                                "Displayed Variable: ",
                                data && data[selectedVar] ? data[selectedVar]["name"] : "N/A",
                                " "
                            ]
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                            children: data && data[selectedVar] ? data[selectedVar]["description"] : "No description available"
                        })
                    ]
                }),
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: "w-1/4 py-4 px-8 text-right",
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h1", {
                            children: "Legend"
                        }),
                        data && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(Legend, {
                            data: selectedVarScale
                        })
                    ]
                })
            ]
        })
    });
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().memo(ControlPanel));


/***/ }),

/***/ 953:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Navbar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(992);
/* harmony import */ var _Sidebar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(709);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Navbar__WEBPACK_IMPORTED_MODULE_2__, _Sidebar__WEBPACK_IMPORTED_MODULE_3__]);
([_Navbar__WEBPACK_IMPORTED_MODULE_2__, _Sidebar__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




const Layout = (props)=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "grid min-h-screen grid-rows-header bg-zinc-100",
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: "bg-white shadow-sm z-10",
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Navbar__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
                    selectedCity: props.selectedCity,
                    setSelectedCity: props.setSelectedCity,
                    citiesList: props.citiesList,
                    setCitiesList: props.setCitiesList
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "grid md:grid-cols-sidebar ",
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Sidebar__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
                        selectedCell: props.selectedCell,
                        setSelectedCell: props.setSelectedCell,
                        city_data: props.city_data,
                        clusterID: props.clusterID,
                        setclusterID: props.setclusterID,
                        selectedVar: props.selectedVar,
                        setSelectedVar: props.setSelectedVar,
                        selectedVarScale: props.selectedVarScale,
                        setSelectedVarScale: props.setSelectedVarScale,
                        selectedCity: props.selectedCity,
                        setSelectedCity: props.setSelectedCity
                    }),
                    props.children
                ]
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Layout);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 992:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _headlessui_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(275);
/* harmony import */ var _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(958);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_headlessui_react__WEBPACK_IMPORTED_MODULE_2__, _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__]);
([_headlessui_react__WEBPACK_IMPORTED_MODULE_2__, _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
// components/layout/Navbar.tsx






const Navbar = ({ selectedCity, setSelectedCity, citiesList, setCitiesList })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("nav", {
        className: classnames__WEBPACK_IMPORTED_MODULE_4___default()({
            "bg-white text-zinc-500": true,
            "flex items-center": true,
            "w-full fixed z-10 px-4 shadow-sm h-16": true
        }),
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: "font-bold text-lg pr-4",
                children: "Urban Morphology Explorer"
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu, {
                as: "div",
                className: "relative inline-block text-left",
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Button, {
                            className: "inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 w-40 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",
                            children: [
                                selectedCity,
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__.ChevronDownIcon, {
                                    className: "-mr-1 h-5 w-5 text-gray-400",
                                    "aria-hidden": "true"
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Transition, {
                        as: react__WEBPACK_IMPORTED_MODULE_1__.Fragment,
                        enter: "transition ease-out duration-100",
                        enterFrom: "transform opacity-0 scale-95",
                        enterTo: "transform opacity-100 scale-100",
                        leave: "transition ease-in duration-75",
                        leaveFrom: "transform opacity-100 scale-100",
                        leaveTo: "transform opacity-0 scale-95",
                        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Items, {
                            className: "absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: "py-1",
                                children: citiesList.filter((city)=>city !== selectedCity).map((city)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Item, {
                                        children: ({ active })=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("a", {
                                                href: "#",
                                                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()(active ? "bg-gray-100 text-gray-900" : "text-gray-700", "block px-4 py-2 text-sm"),
                                                onClick: ()=>setSelectedCity(city),
                                                children: city
                                            })
                                    }, city))
                            })
                        })
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Navbar);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 709:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ViolinShape__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(561);
/* harmony import */ var _sidebar_dropdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(722);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_ViolinShape__WEBPACK_IMPORTED_MODULE_2__, _sidebar_dropdown__WEBPACK_IMPORTED_MODULE_3__]);
([_ViolinShape__WEBPACK_IMPORTED_MODULE_2__, _sidebar_dropdown__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);




const Sidebar = ({ city_data, selectedCell, setSelectedCell, clusterID, setclusterID, selectedVar, setSelectedVar, selectedVarScale, setSelectedVarScale, selectedCity, setSelectedCity })=>{
    const sidebarWidth = 266;
    const [nestedCellData, setNestedCellData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});
    const checkEnd = (str)=>{
        return str.endsWith("_25") || str.endsWith("_50") || str.endsWith("_75");
    };
    const default_sidebar = ()=>{
        let nestedObject = {};
        const city_data_1 = city_data[selectedCity];
        delete city_data_1.cluster_ID;
        delete city_data_1.uID;
        delete city_data_1.one_dimensional_diff_between_clusters;
        for(const key in city_data_1){
            if (!checkEnd(key)) {
                nestedObject[key] = {
                    25: null,
                    50: null,
                    75: null,
                    "base": null
                };
            }
        }
        setNestedCellData(nestedObject);
    };
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        default_sidebar();
    }, [
        selectedCity
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (!Object.keys(selectedCell).includes("nothing_selected")) {
            let nestedObject = {};
            const city_data_1 = city_data[selectedCity];
            delete city_data_1.cluster_ID;
            delete city_data_1.uID;
            delete city_data_1.one_dimensional_diff_between_clusters;
            const checkEnd = (str)=>{
                return str.endsWith("_25") || str.endsWith("_50") || str.endsWith("_75");
            };
            for(const key in city_data_1){
                if (!checkEnd(key)) {
                    nestedObject[key] = {
                        25: null,
                        50: null,
                        75: null,
                        "base": null
                    };
                }
            }
            for(const key in selectedCell){
                // Skip these keys
                if (key === "one_dimensional_diff_between_clusters" || key === "uID" || key === "cluster_ID") {
                    continue;
                }
                if (key.endsWith("_25")) {
                    nestedObject[key.slice(0, -3)][25] = Number(selectedCell[key]);
                } else if (key.endsWith("_50")) {
                    nestedObject[key.slice(0, -3)][50] = Number(selectedCell[key]);
                } else if (key.endsWith("_75")) {
                    nestedObject[key.slice(0, -3)][75] = Number(selectedCell[key]);
                } else {
                    nestedObject[key]["base"] = Number(selectedCell[key]);
                }
            }
            setNestedCellData(nestedObject);
        }
    }, [
        selectedCell
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "sidebar shadow-md bg-zinc-50 overflow-y-auto",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h2", {
                children: [
                    "cell uID: ",
                    clusterID.uID,
                    " "
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3", {
                children: [
                    "ClusterID: ",
                    clusterID.clusterID,
                    " "
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "inline-flex px-2",
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                        onClick: ()=>setSelectedVar("cluster_ID"),
                        className: `bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-l ${selectedVar === "cluster_ID" ? "bg-gray-400" : ""}`,
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "flex flex-col items-center",
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                    children: "Urban Type"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                    children: "Equal Intervals"
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                        onClick: ()=>setSelectedVar("one_dimensional_diff_between_clusters"),
                        className: `bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-r ${selectedVar === "one_dimensional_diff_between_clusters" ? "bg-gray-400" : ""}`,
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "flex flex-col items-center",
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                    children: "Urban Type"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                    children: "1-Dimension"
                                })
                            ]
                        })
                    })
                ]
            }),
            nestedCellData && Object.keys(nestedCellData).length > 0 ? Object.entries(nestedCellData).map(([key, value])=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: `p-4 border mb-4 ${selectedVar === key ? "bg-gray-400" : ""}`,
                    onClick: ()=>setSelectedVar(key),
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h3", {
                            className: "text-lg font-bold mb-2",
                            children: key
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                            children: value["base"]
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_ViolinShape__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
                            city_data: city_data[selectedCity],
                            width: sidebarWidth,
                            height: 50,
                            plotKey: key,
                            targetValue: value["base"]
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_sidebar_dropdown__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
                            city_data: city_data[selectedCity],
                            width: sidebarWidth,
                            height: 50,
                            plotKey: key,
                            targetValues: value
                        })
                    ]
                }, key)) : null
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sidebar);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 934:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cz: () => (/* binding */ tessPolyLayer),
/* harmony export */   IR: () => (/* binding */ tessHighlightLayer),
/* harmony export */   n0: () => (/* binding */ tessSelectedLayer)
/* harmony export */ });
const tessPolyLayer = {
    id: "tess",
    type: "fill",
    "source-layer": "trees",
    paint: {
        "fill-outline-color": "rgba(0,0,0,0.1)",
        "fill-color": "rgba(253, 253, 253, 0.1)"
    }
};
// Highlighted county polygons
const tessHighlightLayer = {
    id: "tess-highlighted",
    type: "fill",
    source: "tess",
    "source-layer": "trees",
    paint: {
        "fill-outline-color": "#484896",
        "fill-color": "#6e599f",
        "fill-opacity": 0.75
    }
};
// Highlighted county polygons
const tessSelectedLayer = {
    id: "tess-selected",
    type: "fill",
    source: "tess",
    "source-layer": "trees",
    paint: {
        "fill-outline-color": "#ff0000",
        "fill-color": "#ffa4a4",
        "fill-opacity": 0.4
    }
};


/***/ }),

/***/ 483:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_map_gl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(372);
/* harmony import */ var react_map_gl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_map_gl__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _control_panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(848);
/* harmony import */ var _map_style__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(934);
/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(968);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([d3__WEBPACK_IMPORTED_MODULE_5__]);
d3__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];







const MAPBOX_TOKEN = "pk.eyJ1IjoidmlyZ2lseHciLCJhIjoiY2xncjR3cWg5MTU3NTNwbXRvZGR1YTB0aCJ9.3BvcTt_rt9WSPpePiM3kQw"; // Set your mapbox token here
const MapCont = ({ selectedCell, setSelectedCell, clusterID, setclusterID, selectedVar, setSelectedVar, selectedVarScale, setSelectedVarScale, selectedCity, setSelectedCity, citiesList, setCitiesList })=>{
    const [lng, setLng] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(103.851959);
    const [lat, setLat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1.290270);
    const [zoom, setZoom] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(15);
    const [jenks, setJenks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [directory, setdirectory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [hoverInfo, setHoverInfo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [clickInfo, setClickInfo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const { mapID } = (0,react_map_gl__WEBPACK_IMPORTED_MODULE_2__.useMap)();
    const onHover = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event)=>{
        const cell = event.features && event.features[0];
        setHoverInfo({
            longitude: event.lngLat.lng,
            latitude: event.lngLat.lat,
            cellName: cell && cell.properties.uID,
            clusterID: cell && cell.properties.clusterID,
            props: cell && cell.properties
        });
    }, []);
    const selectedCell_Mapbox_hover = hoverInfo && hoverInfo.cellName || "";
    const filter_hover = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>[
            "in",
            "uID",
            selectedCell_Mapbox_hover
        ], [
        selectedCell_Mapbox_hover
    ]);
    const onClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((event)=>{
        const cell = event.features && event.features[0];
        setClickInfo({
            longitude: event.lngLat.lng,
            latitude: event.lngLat.lat,
            cellName: cell && cell.properties.uID,
            clusterID: cell && cell.properties.clusterID,
            props: cell && cell.properties
        });
        if (cell && cell.properties) {
            const { cluster_ID, uID } = cell.properties;
            setclusterID({
                "clusterID": Number(cluster_ID),
                "uID": Number(uID)
            });
            let props = cell.properties;
            delete props.cluster_ID;
            delete props.uID;
            setSelectedCell(props);
        } else {
            setSelectedCell({
                nothing_selected: "Select a Cell to Continue"
            });
        }
    }, []);
    const selectedCell_Mapbox_click = clickInfo && clickInfo.cellName || "";
    const filter_click = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>[
            "in",
            "uID",
            selectedCell_Mapbox_click
        ], [
        selectedCell_Mapbox_click
    ]);
    const [data, setData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [paint, setPaint] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({
        "fill-outline-color": "rgba(0,0,0,0.1)",
        "fill-color": "rgba(0,0,0,0.1)"
    });
    const tess_paint = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>paint, [
        paint
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Fetch the JSON file
        fetch("layerDirectory.json").then((response)=>{
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json(); // This returns a promise
        }).then((data)=>{
            // Update the state to trigger a re-render.
            // Note that "data" is an object and will be added to the list
            setCitiesList(Object.keys(data));
            setdirectory(data);
        }).catch((error)=>{
            console.error("Error:", error);
        });
    }, []);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Fetch the JSON file
        fetch("weighted_mean.json").then((response)=>{
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json(); // This returns a promise
        }).then((data)=>{
            // Update the state to trigger a re-render.
            // Note that "data" is an object and will be added to the list
            setData(data);
        }).catch((error)=>{
            console.error("Error:", error);
        });
    }, []);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Fetch the JSON file
        fetch("jenks.json").then((response)=>{
            if (!response.ok) {
                throw new Error("Network response was not ok");
            }
            return response.json(); // This returns a promise
        }).then((data)=>{
            // Update the state to trigger a re-render.
            // Note that "data" is an object and will be added to the list
            setJenks(data);
            console.log("%cmap.tsx line:157 data", "color: #007acc;", data);
        }).catch((error)=>{
            console.error("Error:", error);
        });
    }, []);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (mapID && selectedCity && directory) {
            mapID.flyTo({
                center: directory[selectedCity]["lnglat"],
                duration: 10000
            });
        }
    }, [
        mapID,
        selectedCity,
        directory
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (selectedVar === "one_dimensional_diff_between_clusters" && data) {
            const num_clusters = Object.keys(data[selectedCity]).length;
            const min = -10;
            const max = 10;
            // Create a color scale
            const colorScale = d3__WEBPACK_IMPORTED_MODULE_5__.scaleDiverging((t)=>d3__WEBPACK_IMPORTED_MODULE_5__.interpolateRdYlGn(1 - t)).domain([
                min,
                (max + min) / 2,
                max
            ]); // Adjust the domain according to your data range
            function generateStops(min, max, colorScale) {
                const count = 16; // Number of stops
                const step = (max - min) / (count - 1); // Calculate the step size
                const stops = Array.from({
                    length: count
                }, (_, i)=>{
                    const value = min + i * step;
                    const roundedValue = Number(value.toPrecision(3));
                    return [
                        roundedValue,
                        colorScale(value)
                    ];
                });
                return stops;
            }
            // Create color stops
            const stops = generateStops(min, max, colorScale);
            // For more information on data-driven styles, see https://www.mapbox.com/help/gl-dds-ref/
            setPaint({
                "fill-color": {
                    property: "one_dimensional_diff_between_clusters",
                    stops: stops
                },
                "fill-opacity": 0.8
            });
            setSelectedVarScale(stops);
        } else if (selectedVar === "cluster_ID" && data) {
            const num_clusters = Object.keys(data[selectedCity]).length;
            // Create a color scale
            const colorScale = d3__WEBPACK_IMPORTED_MODULE_5__.scaleDiverging((t)=>d3__WEBPACK_IMPORTED_MODULE_5__.interpolateRdYlGn(1 - t)).domain([
                0,
                num_clusters / 2,
                num_clusters
            ]); // Adjust the domain according to your data range
            // Create color stops
            const stops = Array(num_clusters).fill(null).map((_, i)=>{
                return [
                    i,
                    colorScale(i)
                ];
            });
            // For more information on data-driven styles, see https://www.mapbox.com/help/gl-dds-ref/
            setPaint({
                "fill-color": {
                    property: "cluster_ID",
                    stops: stops
                },
                "fill-opacity": 0.8
            });
            setSelectedVarScale(stops);
        } else {
            if (jenks != null) {
                const buckets = jenks[selectedCity][selectedVar]["classes"];
                const min = Number(jenks[selectedCity][selectedVar]["min"]);
                const max = Number(jenks[selectedCity][selectedVar]["max"]);
                const num_clusters = buckets.length;
                // Create a color scale
                const colorScale = d3__WEBPACK_IMPORTED_MODULE_5__.scaleDiverging((t)=>d3__WEBPACK_IMPORTED_MODULE_5__.interpolateRdYlGn(1 - t)).domain([
                    0,
                    num_clusters / 2,
                    num_clusters
                ]);
                const stops = [];
                stops.push(colorScale(min));
                buckets.forEach((bucket, index)=>{
                    const [bucketMin, bucketMax] = bucket;
                    const color = colorScale(index); // Use the index of each bucket for color mapping
                    stops.push(bucketMin, color);
                });
                stops.push(Number(max), colorScale(num_clusters)); // Add the maximum value and its color
                // Set the 'fill-color' property using the stops
                setPaint({
                    "fill-color": [
                        "step",
                        [
                            "get",
                            selectedVar
                        ],
                        ...stops
                    ],
                    "fill-opacity": 0.8
                });
                // Helper function to create pairs
                const createPairs = (array)=>{
                    let pairs = [];
                    for(let i = 0; i < array.length; i += 2){
                        pairs.push([
                            "<" + Math.round(array[i + 1] * 1000) / 1000,
                            array[i]
                        ]);
                    }
                    return pairs.slice(1, pairs.length - 1);
                };
                setSelectedVarScale(createPairs(stops));
            }
        }
    }, [
        selectedVar,
        data,
        jenks,
        selectedCity
    ]); // Note the addition of data here
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            directory && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx((react_map_gl__WEBPACK_IMPORTED_MODULE_2___default()), {
                initialViewState: {
                    latitude: lat,
                    longitude: lng,
                    zoom: zoom
                },
                minZoom: 14,
                mapStyle: "mapbox://styles/mapbox/light-v9",
                mapboxAccessToken: MAPBOX_TOKEN,
                onMouseMove: onHover,
                onClick: onClick,
                interactiveLayerIds: [
                    "tess"
                ],
                id: "mapID",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_map_gl__WEBPACK_IMPORTED_MODULE_2__.Source, {
                    type: "vector",
                    url: directory[selectedCity]["tess"],
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_map_gl__WEBPACK_IMPORTED_MODULE_2__.Layer, {
                            ..._map_style__WEBPACK_IMPORTED_MODULE_4__/* .tessPolyLayer */ .Cz,
                            paint: tess_paint
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_map_gl__WEBPACK_IMPORTED_MODULE_2__.Layer, {
                            ..._map_style__WEBPACK_IMPORTED_MODULE_4__/* .tessHighlightLayer */ .IR,
                            filter: filter_hover
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_map_gl__WEBPACK_IMPORTED_MODULE_2__.Layer, {
                            ..._map_style__WEBPACK_IMPORTED_MODULE_4__/* .tessSelectedLayer */ .n0,
                            filter: filter_click
                        })
                    ]
                })
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_control_panel__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
                selectedVar: selectedVar,
                setSelectedVar: setSelectedVar,
                selectedVarScale: selectedVarScale,
                setSelectedVarScale: setSelectedVarScale,
                selectedCity: selectedCity,
                setSelectedCity: setSelectedCity
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapCont);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 722:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ Dropdown)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _headlessui_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(275);
/* harmony import */ var _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(958);
/* harmony import */ var _ViolinShape__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(561);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_headlessui_react__WEBPACK_IMPORTED_MODULE_2__, _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__, _ViolinShape__WEBPACK_IMPORTED_MODULE_4__]);
([_headlessui_react__WEBPACK_IMPORTED_MODULE_2__, _heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__, _ViolinShape__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);





function classNames(...classes) {
    return classes.filter(Boolean).join(" ");
}
function Dropdown({ city_data, width, height, plotKey, targetValues }) {
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu, {
        as: "div",
        className: "relative mt-5 text-left",
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Button, {
                    className: "inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",
                    children: [
                        "Details",
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_heroicons_react_20_solid__WEBPACK_IMPORTED_MODULE_3__.ChevronDownIcon, {
                            className: "-mr-1 h-5 w-5 text-gray-400",
                            "aria-hidden": "true"
                        })
                    ]
                })
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Transition, {
                as: react__WEBPACK_IMPORTED_MODULE_1__.Fragment,
                enter: "transition ease-out duration-100",
                enterFrom: "transform opacity-0 scale-95",
                enterTo: "transform opacity-100 scale-100",
                leave: "transition ease-in duration-75",
                leaveFrom: "transform opacity-100 scale-100",
                leaveTo: "transform opacity-0 scale-95",
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Items, {
                    className: "absolute right-0 z-10 mt-2 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none w-full",
                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: "py-1",
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Item, {
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                                    className: "text-gray-700 block px-4 py-2 text-sm",
                                    children: "THIS VARIABLE MEASURES THE X Y Z"
                                })
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Item, {
                                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                    children: [
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                                            className: "text-gray-700 block px-4 py-2 text-sm",
                                            children: "Distribution of nearby cells"
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_ViolinShape__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
                                            city_data: city_data,
                                            width: width,
                                            height: height,
                                            plotKey: plotKey,
                                            targetValue: [
                                                targetValues[25],
                                                targetValues[50],
                                                targetValues[75]
                                            ]
                                        })
                                    ]
                                })
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_headlessui_react__WEBPACK_IMPORTED_MODULE_2__.Menu.Item, {
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("p", {
                                    className: "text-gray-700 block px-4 py-2 text-sm",
                                    children: "Note: The violin plot is generated from a random sample of values, outlier values may therefore be higher or lower than the plot."
                                })
                            })
                        ]
                    })
                })
            })
        ]
    });
}

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 151:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Z: () => (/* binding */ loadCellData)
});

;// CONCATENATED MODULE: external "fs"
const external_fs_namespaceObject = require("fs");
var external_fs_default = /*#__PURE__*/__webpack_require__.n(external_fs_namespaceObject);
;// CONCATENATED MODULE: external "path"
const external_path_namespaceObject = require("path");
var external_path_default = /*#__PURE__*/__webpack_require__.n(external_path_namespaceObject);
;// CONCATENATED MODULE: external "papaparse"
const external_papaparse_namespaceObject = require("papaparse");
var external_papaparse_default = /*#__PURE__*/__webpack_require__.n(external_papaparse_namespaceObject);
;// CONCATENATED MODULE: external "lodash"
const external_lodash_namespaceObject = require("lodash");
var external_lodash_default = /*#__PURE__*/__webpack_require__.n(external_lodash_namespaceObject);
;// CONCATENATED MODULE: ./lib/loadCellData.js




const postsDirectory = external_path_default().join(process.cwd(), "city_data");
async function loadCellData() {
    const fileNames = external_fs_default().readdirSync(postsDirectory);
    let output = {};
    fileNames.forEach((fileName)=>{
        // Read markdown file as string
        const fullPath = external_path_default().join(postsDirectory, fileName);
        const fileContents = external_fs_default().readFileSync(fullPath, "utf8");
        let output_1 = {};
        external_papaparse_default().parse(fileContents, {
            header: true,
            complete: function(results) {
                results.data.forEach((row)=>{
                    for(const key in row){
                        if (!output_1[key]) output_1[key] = [];
                        output_1[key].push(row[key]);
                    }
                });
            }
        });
        let city_name = fileName.split("-", 1)[0];
        if (city_name in output) {
            for(const key in output_1){
                output[city_name][key] = (output[city_name][key] || []).concat(output_1[key]);
            }
        } else {
            output[city_name] = output_1;
        }
    });
    for(const key in output){
        output[key] = external_lodash_default().mapValues(output[key], (list)=>external_lodash_default().sampleSize(list, 600));
    }
    return output;
}


/***/ }),

/***/ 603:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(893);
/* harmony import */ var next_font_google_target_css_path_pages_index_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(566);
/* harmony import */ var next_font_google_target_css_path_pages_index_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_pages_index_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var mapbox_gl_dist_mapbox_gl_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(991);
/* harmony import */ var mapbox_gl_dist_mapbox_gl_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl_dist_mapbox_gl_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _components_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(483);
/* harmony import */ var components_layout_Layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(953);
/* harmony import */ var _lib_loadCellData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(151);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_components_map__WEBPACK_IMPORTED_MODULE_2__, components_layout_Layout__WEBPACK_IMPORTED_MODULE_3__]);
([_components_map__WEBPACK_IMPORTED_MODULE_2__, components_layout_Layout__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);






// This function runs only on the server side
async function getStaticProps() {
    // Instead of fetching your `/api` route you can call the same
    // function directly in `getStaticProps`
    const city_data = await (0,_lib_loadCellData__WEBPACK_IMPORTED_MODULE_4__/* .loadCellData */ .Z)();
    // Props returned will be passed to the page component
    return {
        props: {
            city_data
        }
    };
}

const Home = ({ city_data, selectedCell, setSelectedCell, clusterID, setclusterID, selectedVar, setSelectedVar, selectedVarScale, setSelectedVarScale, selectedCity, setSelectedCity, citiesList, setCitiesList })=>{
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(components_layout_Layout__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
        city_data: city_data,
        selectedCell: selectedCell,
        setSelectedCell: setSelectedCell,
        clusterID: clusterID,
        setclusterID: setclusterID,
        selectedVar: selectedVar,
        setSelectedVar: setSelectedVar,
        selectedVarScale: selectedVarScale,
        setSelectedVarScale: setSelectedVarScale,
        selectedCity: selectedCity,
        setSelectedCity: setSelectedCity,
        citiesList: citiesList,
        setCitiesList: setCitiesList,
        children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("main", {
            className: `flex min-h-[16] flex-col items-center ${(next_font_google_target_css_path_pages_index_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_6___default().className)}`,
            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_map__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z, {
                selectedCell: selectedCell,
                setSelectedCell: setSelectedCell,
                clusterID: clusterID,
                setclusterID: setclusterID,
                selectedVar: selectedVar,
                setSelectedVar: setSelectedVar,
                city_data: city_data,
                selectedVarScale: selectedVarScale,
                setSelectedVarScale: setSelectedVarScale,
                selectedCity: selectedCity,
                setSelectedCity: setSelectedCity,
                citiesList: citiesList,
                setCitiesList: setCitiesList
            })
        })
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Home);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 991:
/***/ (() => {



/***/ }),

/***/ 3:
/***/ ((module) => {

"use strict";
module.exports = require("classnames");

/***/ }),

/***/ 76:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module.js");

/***/ }),

/***/ 100:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/render.js");

/***/ }),

/***/ 689:
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ 372:
/***/ ((module) => {

"use strict";
module.exports = require("react-map-gl");

/***/ }),

/***/ 275:
/***/ ((module) => {

"use strict";
module.exports = import("@headlessui/react");;

/***/ }),

/***/ 958:
/***/ ((module) => {

"use strict";
module.exports = import("@heroicons/react/20/solid");;

/***/ }),

/***/ 968:
/***/ ((module) => {

"use strict";
module.exports = import("d3");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [812], () => (__webpack_exec__(978)));
module.exports = __webpack_exports__;

})();